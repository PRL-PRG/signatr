---
title: "signatr-reader"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)

experiment_dir <- "/mnt/data/signatr-experiment-hyeyoung/experiment/"
packages <- list.files(experiment_dir)

package_paths <- lapply(packages, function(package) paste0(experiment_dir, package, "/"))

signature_files <- lapply(package_paths, function(package_path) {
      file <- list.files(path=package_path, pattern="data.RDS$")
      paste0(package_path, file)
})

success_files <- lapply(package_paths, function(package_path) {
      file <-list.files(path=package_path, pattern="success.csv$")
      paste0(package_path, file)
})

metadata_files <- lapply(package_paths, function(package_path) {
      file <- list.files(path=package_path, pattern="metadata.csv$")
      paste0(package_path, file)
})

signature_data <- lapply(signature_files, function(f) readRDS(f))
success_data <- lapply(success_files, function(f) read.csv(f))
metadata  <- lapply(metadata_files, function(f) read.csv(f))

```

## How to read signatr data

There are three kinds of data we collect from signatr experiments.   
For instance,  

+ signature data: the sig column indicates the inferred signature of the function if the run didn't error
```{r}
cat("Reading signature data from package: ", packages[[1]])
signature_data[[1]]
```

+ success data: the success column indicates success rate* of the experiment  
*the success rate is calculated by the number of unique signature inferred divided by the number of unique input types tried
```{r}
cat("Reading success data from package: ", packages[[1]])
success_data[[1]]
```

+ metadata: includes metadata obtained from the experiment    
```{r}
cat("Reading metadata from package: ", packages[[1]])
metadata[[1]]
```

